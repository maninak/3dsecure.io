/*-----------------------------*\
 *  VARIABLES
\*-----------------------------*/

/*
    Misc
*/
$font-size-base: 20px;

$opacity-full: 1;
$opacity-primary: 0.87;
$opacity-secondary: 0.54;
$opacity-tertiary: 0.23;
$opacity-none: 0;

$url-CL-pattern-diamonds: 'assets/img/pattern-diamonds.png';

/*
    Colors
*/
// inspired from http://www.paletton.com/#uid=73r2n0kw0uj55+GbzS7B-gzQh5I
$color-primary: #076c98;
$color-primary-brighter: #008bc7;

$color-primary-lighter: #e7f6fe;
$color-primary-light: #96cde5;
$color-primary-dark: #033b53;
$color-primary-darker: #00141d;

$color-accent: #de7f12;
$color-accent-brighter: #ff8800;

$color-accent-lighter: #ffecd7;
$color-accent-light: #ffd4a3;
$color-accent-dark: #9e5300;
$color-accent-darker: #2d1800;

$color-success: #00ac4b;
$color-failure: #f13200;

$color-white: rgba(255, 255, 255, $opacity-full);
$color-white-trans: rgba(255, 255, 255, $opacity-primary);
$color-black:rgba(0, 0, 0, $opacity-full);
$color-black-trans: rgba(0, 0, 0, $opacity-primary);

$color-CL-primary: #263347;

/*
    Breakpoints
*/
$brk-phone-vs-tablet-prtr: 600px;
$brk-tablet-prtr-vs-tablet-lnds: 900px;
$brk-tablet-lnds-vs-desktop: 1200px;
$brk-desktop-vs-big-desktop: 1800px;

@mixin for-phone-only {
  @media (max-width: $brk-phone-vs-tablet-prtr) { @content; }
}

@mixin for-tablet-portrait-up {
  @media (min-width: $brk-phone-vs-tablet-prtr) { @content; }
}

@mixin for-tablet-landscape-up {
  @media (min-width: $brk-tablet-prtr-vs-tablet-lnds) { @content; }
}

@mixin for-desktop-up {
  @media (min-width: $brk-tablet-lnds-vs-desktop) { @content; }
}

@mixin for-big-desktop-up {
  @media (min-width: $brk-desktop-vs-big-desktop) { @content; }
}



/*-----------------------------*\
 *  TYPOGRAPHY
\*-----------------------------*/

// Actual font files are embedded as BASE64 in `fonts-woff[2].scss`

$font-calibre: Calibre,-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans","Helvetica Neue", sans-serif;
$font-circularPro: Circular, "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Geneva, Arial, sans-serif;


h1,
h2,
h3,
h4,
h5,
h6 {
  margin-bottom: 0.6em;
  font-family: $font-circularPro;
  font-weight: 500;
  letter-spacing: -0.03em;
  line-height: 1.3em;
}

h1 { font-size: $font-size-base * 3;    }
h2 { font-size: $font-size-base * 2.2;  }
h4 { font-size: $font-size-base * 1.2;  }

p {
  font-family: $font-calibre;
  font-size: $font-size-base * 0.8;
  line-height: 1.15em;
}

  

/*-----------------------------*\
 *  UTILITIES
\*-----------------------------*/

/*
    Fixed size variables
*/
$xs:  $font-size-base * 0.25; // extra small
$sm:  $font-size-base * 0.5;  // small
$md:  $font-size-base * 1;    // medium
$lg:  $font-size-base * 2;    // large
$xl:  $font-size-base * 4;    // extra large
$ul:  $font-size-base * 8;    // ultra large

/*
    Applies the provided patterned image to the vertical side of the element to which this is included.

    Example:
    section {
      @include pattern(bottom, assets/img/dat-pattern.png)
    }

    @param {String} $verticalPosition Choice of vertical position of pattern. Can be `top` or `bottom`.
    @param {String} $patternUrl URL to the patterned image to be applied.
*/
@mixin pattern($verticalPosition, $patternUrl) {
  position: relative;
  z-index: 0;
  overflow: hidden;
  
    &::before {
      content: " ";
      display: block;
      width: 100%;
      height: 530px;
      position: absolute;
      background-size: auto;
      background-repeat: repeat-x;
      background-position-x: center;
      background-image: url($patternUrl);
      opacity: 1;
      z-index: -1;

      @if $verticalPosition == 'top' {
        top: -262px;
        transform: rotate(180deg);
      }

      @if $verticalPosition == 'bottom' {
        bottom: -262px;
      }
    }

}

/*
    Creates slanted (diagonal) edge effect to the element wherein it is included

    Example:
    section {
      @include slanted-edge(top, right, -10deg);
    }

    @param {String} $verticalPosition Choice of vertical edge. Can be `top` or `bottom`.
    @param {String} $horizontalPosition Choice of horizontal edge. Can be `left` or `right`.
    @param {Degrees} $verticalPosition The angle between the chosen edges. Can be positive or negative degrees.
*/
@mixin slanted-edge($verticalPosition, $horizontalPosition, $angle) {
  position: relative;

  &::before {
    content: '';
    width: 100%;
    height: 100%;
    position: absolute;
    background: inherit;
    z-index: -1;
    transform: skewY($angle);
    
    $verticalPosition: 0;
    @if $horizontalPosition == 'right' { transform-origin: left  $verticalPosition; }
    @if $horizontalPosition == 'left'  { transform-origin: right $verticalPosition; }
  }
}

/*
    Button HTML helper classes
*/
.btn {
  display: inline-block;
  padding: ($font-size-base * 0.7) ($font-size-base * 1.4) ($font-size-base * 0.7) ($font-size-base * 1.4);
  border-radius: 50px;
  font-family: $font-calibre;
  font-size: $font-size-base * 0.7;
  font-weight: bold;
  letter-spacing: 0.035em;
  text-transform: uppercase;
  text-decoration: none;
}

.btn--outline {
  border: 1px solid rgba(255, 255, 255, $opacity-tertiary);
  transition: border 0.1s ease;
  transition: background-color 0.1s ease;

  &:hover {
    border-color: transparent;
    background-color: rgba(255, 255, 255, $opacity-tertiary);
    color: $color-white;
  }
}

.btn--full-width {
  width: 100%;
  text-align: center;
}

.btn--accent {
  background-color: $color-accent;
  color: $color-white;
  transition: background-color 0.1s ease;

  &:hover {
    background-color: $color-accent-brighter;
    color: $color-white;
  }
}



/*-----------------------------*\
 *  GLOBAL RULES
\*-----------------------------*/

* {
  margin: 0;
  padding: 0;
}

h1 a:not(.no-link-style),
h2 a:not(.no-link-style),
h3 a:not(.no-link-style),
h4 a:not(.no-link-style), 
h5 a:not(.no-link-style),
h6 a:not(.no-link-style),
p  a:not(.no-link-style) {
  border-bottom: $color-white-trans 0.05em solid !important;
  text-decoration: none;
}

a,
a:visited {
  text-decoration: none;
  color: inherit;
  transition: color 0.1s ease;
  transition: border 0.1s ease;
}

a:not(.no-link-style):not(.btn) {
  margin-bottom: -0.125em; // counters the border-bottom offsetting
  border-bottom: 0.125em transparent solid;
  transition: color 0.1s ease;
  transition: border-color 0.15s ease;

  &:hover {
    border-bottom: 0.125em $color-accent-brighter solid !important;
    color: $color-white;
  }
}



/*-----------------------------*\
 *  PRODUCT PAGE
\*-----------------------------*/

/*
    Overall layout
*/
body {
  font-size: $font-size-base;

  section {
    max-width: $brk-tablet-lnds-vs-desktop - ($font-size-base * 2); // ($font-size-base * 2) offsets padding
    margin: 0 auto;
    padding-right: $font-size-base;
    padding-left: $font-size-base;

    @include for-phone-only {
      padding-right: $font-size-base / 2;
      padding-left: $font-size-base / 2;
    }
  }
}

/*
    Header (contains `Navbar` and `Hero` sections)
*/
header {
  position: relative;
  overflow: hidden;
  min-height: 100vh;
  // background-image: linear-gradient(-30deg, $color-primary 0%, $color-primary-brighter 80%); // default bleu
  // background-image: linear-gradient(-30deg, $color-primary 0%, #6694af 80%); // brighter default bleu
  background-image: linear-gradient(-30deg, $color-primary-lighter 0%, $color-primary 60%); // terquose with default bleu
  // background-image: linear-gradient(-30deg, #243949 0%, #517fa4 100%); // deheued bleu, better than mine
  // background-image: linear-gradient(-30deg, #d7d2cc 0%, #304352 100%); // silver powah
  // background-image: linear-gradient(-20deg, #616161 0%, #9bc5c3 100%); // moshy pastel grayz
  // background-image: linear-gradient(to top, #1e3c72 0%, #1e3c72 1%, #2a5298 100%); // self-respec
  // background-image: linear-gradient(45deg, #874da2 0%, #c43a30 100%); // hip pink-purp
  // background-image: linear-gradient(-20deg, #2b5876 0%, #4e4376 100%); // dusk blue-purplez

  // background: linear-gradient(to bottom, rgba(255,255,255,0.15) 0%, rgba(0,0,0,0.15) 100%), radial-gradient(at top center, rgba(255,255,255,0.40) 0%, rgba(0,0,0,0.40) 120%) #989898; 
  // background-blend-mode: multiply,multiply; // grey globe on links
}

/*
    Navbar section
*/
section.navbar {
  padding-top: $md;
  padding-bottom: $md;
  font-family: $font-calibre;
  font-size: 0.9em;
  color: $color-white-trans;

  .navbar__wrap {
    display: flex;
    align-items: center;
    justify-content: space-between;

    .navbar__wrap__brand {
      a {
        display: flex;
        align-items: center;

        &:hover span {
          border-bottom: 0.1em $color-accent-brighter solid;
          color: $color-white;
        }

        img {
          margin-right: 0.25em;
          opacity: 0.9; // TODO delete when placeholder img is deleted
          filter: hue-rotate(188deg); // TODO delete when placeholder img is deleted
          transition: filter 0.1s ease;
        }

        span {
          margin-bottom: -0.1em;
          border-bottom: 0.1em transparent solid;
          font-family: $font-circularPro;
          transition: color 0.1s ease;
          transition: border-color 0.15s ease;
        }
      }
    }

    .navbar__wrap__main-links {
      display: flex;
      align-items: center;
      justify-content: space-between;
      list-style-type: none;

      a {
        padding: 0.5em 1em 0.5em 1em;
        
        li {
          display: inline;
        }
      }
    }
  }
}

/*
    Hero section
*/
section.hero {
  padding-top: $xl;
  padding-bottom: $xl;
  color: $color-white;

  .hero__copy {
    position: relative;
    z-index: 6;

    .hero__copy__title-big {
      @include for-tablet-portrait-up { display: none; }
      @include for-tablet-landscape-up { display: inherit; }
    }

    .hero__copy__title-small {
      @include for-phone-only { display: inherit; }
      @include for-tablet-portrait-up { display: inherit; }
      @include for-tablet-landscape-up { display: none; }
    }
    
    .hero__copy__descr {
      max-width: $brk-phone-vs-tablet-prtr;
      margin-bottom: 2em;
      font-size: 1.1em;
      color: $color-white-trans;
    }
  }

  .js-polyhedron-container {
    position: absolute;
    z-index: 3;
    
    @include for-tablet-portrait-up {
      right: -160px;
      bottom: -300px;
      width: 600px;
      height: 600px;
    }

    @include for-tablet-landscape-up {
      right: -185px;
      bottom: -350px;
      width: 700px;
      height: 700px;
    }
    
    @include for-desktop-up {
      right: -210px;
      bottom: -400px;
      width: 800px;
      height: 800px;
    }
  }

  .js-polyhedron-container:before {
    content: "";
    display:block;
    position: absolute;
    background-color: rgba(255, 255, 255, $opacity-primary);
    z-index: 4;
    
    @include for-tablet-portrait-up {
      width: 400px;
      height: 400px;
      margin-top: calc((600px - 400px) / 2);
      margin-left: calc((600px - 400px) / 2);
      border-radius: 50%;
      filter: blur(90px);
    }
    
    @include for-tablet-landscape-up {
      width: 500px;
      height: 500px;
      margin-top: calc((700px - 500px) / 2);
      margin-left: calc((700px - 500px) / 2);
      border-radius: 50%;
      filter: blur(100px);
    }

    @include for-desktop-up {
      width: 600px;
      height: 600px;
      margin-top: calc((800px - 600px) / 2);
      margin-left: calc((800px - 600px) / 2);
      border-radius: 50%;
      filter: blur(110px);
    }
  }
}

/*
    Features section
*/
.features-backdrop {
  @include slanted-edge(bottom, left, -5deg);
  background-image: linear-gradient(-5deg, $color-primary-lighter, $color-white);
}

section.features {
  padding-top: calc(60px + 8vw);
  padding-bottom: calc(60px + 8vw);

  h2,
  h4,
  p {
    color: $color-black-trans;
  }

  .feat-wrap {
    display: grid;

    @include for-tablet-portrait-up {
      grid-template-rows: auto;
      grid-template-columns:
          minmax(133px, 260px)
          minmax(80px,  1fr)
          minmax(133px, 260px)
          minmax(80px,  1fr)
          minmax(133px, 260px);
      grid-template-areas: 'content-1 gutter-l content-2 gutter-r content-3';
    }

    :nth-child(1).feat-wrap__feat { grid-area: content-1; }
    :nth-child(2).feat-wrap__feat { grid-area: content-2; }
    :nth-child(3).feat-wrap__feat { grid-area: content-3; }

    .feat-wrap__feat {
      .feat-wrap__feat__icon-bg {
        width: $font-size-base * 2.7;
        height: $font-size-base * 2.7;
        margin-bottom: $font-size-base * 1;
        border-radius: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: $color-primary;
  
        svg {
          max-width: $font-size-base * 1.1;
          max-height: $font-size-base * 1.1;
          fill: $color-white;
        }
      }
    }
  }
}

/*
    Pricing section
*/
section.pricing {
  padding-top: calc(14vw + 80px);
  padding-bottom: calc(14vw + 80px);
  color: $color-black-trans;

  .pricing__wrap {
    display: grid;
  
    @include for-tablet-portrait-up {
      grid-template-rows:
          auto
          minmax(100px,  1fr)
          auto
          minmax(100px,  1fr)
          auto;
      grid-template-areas:  'content-1'
                            'gutter-t '
                            'content-2'
                            'gutter-b '
                            'content-3';
    }
  
    @include for-tablet-landscape-up {
      grid-template-rows: auto;
      grid-template-columns:
          minmax(133px, 260px)
          minmax(80px,  1fr)
          minmax(133px, 260px)
          minmax(80px,  1fr)
          minmax(133px, 260px);
      grid-template-areas: 'content-1 gutter-l content-2 gutter-r content-3';
    }

    .pricing__wrap__title {
      grid-area: content-1;
      display: flex;
      align-items: center;
  
      @include for-tablet-portrait-up {
        justify-content: center;
      }
  
      @include for-tablet-landscape-up {
        justify-content: left;
      }
  
      .pricing__wrap__title__wrap {
        display: flex;
  
        @include for-tablet-landscape-up {
          flex-direction: column;
        }
        
          h2 {
            margin-bottom: 0;
  
            @include for-tablet-portrait-up {
              display: inline-block;
              margin-right: 0.25em;
            }
  
            @include for-tablet-landscape-up {
              display: block;
              margin-right: none;
            }
          }
  
          .pricing__wrap__title__wrap__subtitle {
            font-family: $font-circularPro;
            font-weight: 500;
            letter-spacing: -0.03em;
            line-height: 1.3em;
            font-size: $font-size-base * 2.2;
  
            &:nth-child(2) {
              color: rgba(0, 0, 0, $opacity-secondary);
            }
            
            &:nth-child(3) {
              color: rgba(0, 0, 0, $opacity-tertiary);
              filter: blur(0.03em);
            }
  
            @include for-tablet-portrait-up {
              display: inline-block;
              margin-right: 0.3em;
  
              &:last-child {
                margin-right: 0;
              }
            }
  
            @include for-tablet-landscape-up {
              display: block;
              margin-right: none;
            }
          }
      }
    }
  
    .pricing__wrap__price {
      grid-area: content-2;
      display: flex;
      align-items: center;
      font-family: $font-calibre;
  
      @include for-tablet-portrait-up {
        justify-content: center;
      }
  
      @include for-tablet-landscape-up {
        justify-content: left;
      }
  
      .pricing__wrap__price__wrap {
        display: inline-block;
  
        .pricing__wrap__price__wrap__plan {
          font-size: 1.8em;
        }
  
        .pricing__wrap__price__wrap__discl {
          float: right;
          font-size: 0.7em;
          color: rgba(0, 0, 0, $opacity-secondary);
        }
      }
    }
  
    .pricing__wrap__traits {
      grid-area: content-3;
      display: flex;
      justify-content: center;
      font-family: $font-calibre;
      font-size: 1.1em;
  
      @include for-tablet-landscape-up {
        flex-direction: column;
      }
  
      .pricing__wrap__traits__wrap__trait {
        display: flex;
        align-items: center;
  
        @include for-tablet-portrait-up {
          margin-bottom: 0.6em;
        }
  
        @include for-tablet-landscape-up {
          margin-bottom: 1.2em;
        }
  
        &:last-child {
          margin-bottom: 0;
        }
  
        svg {
          max-width: $font-size-base * 1.1;
          max-height: $font-size-base * 1.1;
          margin-right: 0.5em;
          fill: rgba(0, 0, 0, $opacity-primary)
        }      
      }
    }
  }
}

/*
    Threeds section
*/
.threeds-backdrop {
  @include slanted-edge(top, right, -5deg);
  background-image: linear-gradient(-5deg, $color-primary-dark, #0d364a);
}

section.threeds {
  padding-top: calc(60px + 8vw);
  padding-bottom: calc(60px + 8vw);
  font-family: $font-calibre;
  color: $color-white-trans;

  h2 {
    margin-bottom: 1em;
    text-align: center;
  }

  .threeds__wrap {
    display: grid;
  
    @include for-phone-only {
      grid-template-rows: auto
                          auto;
      grid-template-columns: 1fr minmax(270px, 450px) 1fr;
      grid-template-areas:  'margin-l content-1 margin-r'
                            'margin-l content-2 margin-r';
    }
  
    @include for-tablet-portrait-up {
      grid-template-rows: auto
                          auto;
      grid-template-columns: 1fr minmax(270px, 450px) 1fr;
      grid-template-areas:  'margin-l content-1 margin-r'
                            'margin-l content-2 margin-r';
    }
  
    @include for-tablet-landscape-up {
      grid-template-rows: auto;
      grid-template-columns:
          1fr
          minmax(250px, 450px)
          minmax(80px, 1fr)
          minmax(250px, 450px)
          1fr;
      grid-template-areas: 'margin-l content-1 gutter-m content-2 margin-r';
    }

    .threeds__wrap__pros {
      grid-area: content-1;
  
      @include for-phone-only { margin-top: 16px; } // 60px - 44px form title's margin-bottom
      @include for-tablet-portrait-up { margin-top: 16px; } // 60px - 44px form title's margin-bottom
      @include for-tablet-landscape-up { margin-top: 0; }
      
      .threeds__wrap__pros__pro {
        @include for-phone-only { margin-bottom: 1.2em; }
        @include for-tablet-portrait-up { margin-bottom: 1.2em; }
        @include for-tablet-landscape-up { margin-bottom: 1.8em; }
        
        &:last-child {
          margin-bottom: 0;
        }
  
        svg {
          float: left;
          max-width: $font-size-base * 2.2;
          max-height: $font-size-base * 2.2;
          margin-top: 0.25em;
          margin-right: 0.8em;
          fill: $color-accent;
        }
  
        span {
          display:flex;
          font-size: 1.2em;
        }
      }
    }
  
    .threeds__wrap__explanation {
      grid-area: content-2;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      border-left: $color-accent 0.5em solid;
      padding-left: 0.8em;
  
      @include for-phone-only { margin-top: $font-size-base * 3; }
      @include for-tablet-portrait-up { margin-top: $font-size-base * 3; }
      @include for-tablet-landscape-up { margin-top: 0; }
  
      .threeds__wrap__explanation__text {
        font-size: 0.95em;
      }
  
      .threeds__wrap__explanation__more {
        margin-top: 1em;
        font-size: 0.85em;
      }
    }
  }
}

/*
    Footer section
*/
footer {
  @include pattern(bottom, $url-CL-pattern-diamonds);
  background-color: $color-primary-darker;
}

section.footer {
  padding-top: calc(60px + 8vw);
  font-family: $font-calibre;
  color: $color-white-trans;

  .footer__credits {
    display: grid;
    width: 100%;
    margin-bottom: calc(60px + 8vw);

    @include for-tablet-portrait-up {
      grid-template-rows: auto
                          auto;
      grid-template-columns: 1fr 560px 1fr;
      grid-template-areas:  'margin-l   main    margin-r'
                            'margin-l   aside   margin-r';
    }

    @include for-tablet-landscape-up {
      grid-template-columns: 560px minmax(80px, 1fr) minmax(170px, 260px);
      grid-template-areas: 'main gutter-m aside';
    }

    main {
      grid-area: main;

      @include for-tablet-portrait-up {

      }

      @include for-tablet-landscape-up {
        display: flex;
        align-items: center;
      }

      .footer__credits__title {
        display: flex;
        align-items: center;
        margin-bottom: 0;

        .footer__credits__title__prefix {
          margin-right: 0.25em;
        }

        a {
          display: flex;
          align-items: center;
          filter: drop-shadow(transparent 0 0 0px);
          transition: filter 0.1s ease;

          &:hover {
            filter: drop-shadow($color-CL-primary 0 0 30px);
          }

          &:hover .footer__credits__title__suffix {
            margin-bottom: -0.125em;
            border-bottom: 0.125em $color-accent-brighter solid;
            color: $color-white;
          }
          
          &:hover .footer__credits__title__clrhs-logo {
            opacity: $opacity-full;
          }

          .footer__credits__title__suffix {
            margin-right: $font-size-base * 1.5;
            margin-bottom: -0.05em;
            border-bottom: $color-white-trans 0.05em solid;
            transition: color 0.1s ease;
          }

          .footer__credits__title__clrhs-logo {
            max-width: $font-size-base * 5;
            max-height: $font-size-base * 5;
            opacity: $opacity-primary;
            transition: opacity 0.1s ease;
          }
        }
      }
    }

    aside {
      grid-area: aside;
      display: flex;
      justify-content: space-between;

      @include for-tablet-portrait-up {
        margin-top: $font-size-base * 2;
      }

      @include for-tablet-landscape-up {
        min-height: $font-size-base * 8;
        flex-direction: column;
        margin-top: 0;
      }

      .footer__credits__member {
        font-size: 1.4em;
        letter-spacing: -0.03em;

        @include for-tablet-portrait-up {
          max-width: 260px;
        }

        @include for-tablet-landscape-up {
          display: unset;
          margin-bottom: $font-size-base * 1.5;
        }

        .footer__credits__member__principal {
          font-family: $font-circularPro;
        }
      }

      .footer__credits__authorized {
        font-size: 0.95em;

        @include for-tablet-portrait-up {
          max-width: 260px;
        }
      }
    }
  }

  .footer__btt {
    display: flex;
    margin-bottom: ($font-size-base * 2);

    a {
      border-color: rgba(255, 255, 255, $opacity-tertiary);

      &:hover {
        border-color: transparent;
      }
    }
  }
  
  .footer__copyright {
    text-align: center;
    padding-bottom: $md;
    font-size: 0.85em;
    color: rgba(255, 255, 255, $opacity-tertiary);
  }
}
